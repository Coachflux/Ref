<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Mining Savi</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
  *{box-sizing:border-box}
  body{margin:0;background:#052820;color:#fff;font-family:'Segoe UI';padding-bottom:6rem}
  header{width:100%;padding:1rem;text-align:center;background:#052828;font-size:1.5rem}
  .card{background:#f0ffff;color:#041c1c;border-radius:2rem;box-shadow:-10px -10px 30px #fff,10px 10px 30px rgba(0,255,200,0.3);padding:1.5rem;width:90%;max-width:400px;margin:1rem auto;position:relative}
  .calendar-icon{position:absolute;top:10px;right:15px;font-size:1.4rem;color:#00c896;cursor:pointer}
  .view-rank{position:absolute;bottom:10px;right:15px;font-size:0.9rem;color:#00695c;cursor:pointer;text-decoration:underline}
  .calendar-popup{display:none;position:fixed;top:80px;left:10%;width:80%;background:#fff;color:#000;padding:1rem;border-radius:1rem;z-index:999;box-shadow:0 0 10px rgba(0,255,200,0.5);max-height:60vh;overflow-y:auto}
  .close-btn{position:absolute;top:8px;right:8px;cursor:pointer;font-size:1.2rem}
  .balance{font-size:2rem;font-weight:bold;color:#00aa88}
  .rank-section{margin-top:0.5rem;position:relative}
  .rank{font-weight:bold}
  .rank-bar{background:#ccc;border-radius:10px;overflow:hidden;height:10px;margin-top:0.5rem}
  .rank-bar-fill{height:100%;background:linear-gradient(to right,#00ffcc,#00aa88);width:0%}
  .circle-meter{width:200px;height:200px;border-radius:50%;background:url('https://upload.wikimedia.org/wikipedia/commons/3/3f/Tether_Logo.svg') center/cover no-repeat;margin:1rem auto;position:relative}
  .countdown-overlay{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(255,255,255,0.85);padding:0.5rem 1rem;border-radius:10px;color:#041c1c;text-align:center}
  .mine-button{background:linear-gradient(90deg,#00c896,#00ffb3);border:none;padding:1rem;border-radius:10px;color:#041c1c;font-size:1.2rem;width:90%;max-width:400px;display:block;margin:1rem auto;cursor:pointer}
  .nav-bar{position:fixed;bottom:0;left:0;right:0;background:#031e1e;padding:0.5rem 1rem;display:flex;justify-content:space-around;border-top-left-radius:2rem;border-top-right-radius:2rem}
  .nav-icon{color:#9debdc;display:flex;flex-direction:column;align-items:center}
  .nav-icon.active{color:#00ffc8}
  .missed{color:#f44336;font-weight:bold}
  @media(max-width:480px){.circle-meter{width:160px;height:160px}}
</style>
</head>
<body>
<header>Mining Savi</header>
<div class="card">
  <div class="calendar-icon" onclick="toggleCalendar()"><i class="fa-solid fa-calendar-days"></i></div>
  <div class="balance" id="balance">$0.00</div>
  <div class="rank-section">
    <div class="rank" id="rank">Rank: Starter</div>
    <div class="rank-bar"><div class="rank-bar-fill" id="rankProgress"></div></div>
    <div class="view-rank" onclick="showRankDetails()">View Rank Progress</div>
  </div>
</div>
<div class="calendar-popup" id="calendarPopup">
  <i class="fa-solid fa-times close-btn" onclick="toggleCalendar()"></i>
  <strong>Mined Days</strong><br><div id="minedDates"></div>
</div>
<div class="circle-meter">
  <div class="countdown-overlay">
    <div id="countdown">24:00:00</div>
    <div id="mined">+0.00000</div>
  </div>
</div>
<button class="mine-button" onclick="startMining()">Mine now!</button>
<div class="nav-bar">
  <div class="nav-icon"><i class="fa-solid fa-gift"></i><div>Airdrop</div></div>
  <div class="nav-icon"><i class="fa-solid fa-user-group"></i><div>Referral</div></div>
  <div class="nav-icon active"><i class="fa-solid fa-hammer"></i><div>Mine</div></div>
  <div class="nav-icon"><i class="fa-solid fa-newspaper"></i><div>News</div></div>
  <div class="nav-icon"><i class="fa-solid fa-gear"></i><div>Settings</div></div>
</div>
<audio id="miningSound" src="https://www.fesliyanstudios.com/play-mp3/387" preload="auto"></audio>
<script>
(function(){
  const DURATION = 86400000, RATE = 0.00002;
  let interval = null, startTime = 0, baseBalance = 0;

  const balanceEl = document.getElementById('balance'),
        countdownEl = document.getElementById('countdown'),
        minedEl = document.getElementById('mined'),
        rankEl = document.getElementById('rank'),
        rankBar = document.getElementById('rankProgress'),
        minedDatesEl = document.getElementById('minedDates'),
        calendarEl = document.getElementById('calendarPopup'),
        sound = document.getElementById('miningSound');

  function todayStr(){ return new Date().toISOString().split('T')[0]; }
  function getBalance(){ return parseFloat(localStorage.getItem('balance')||'0'); }
  function setBalance(v){ localStorage.setItem('balance', v.toFixed(6)); balanceEl.textContent = `$${v.toFixed(2)}`; }

  function getDays(){ return JSON.parse(localStorage.getItem('days')||'[]'); }
  function addDay(){ let arr=getDays(), t=todayStr(); if(!arr.includes(t)){arr.push(t);localStorage.setItem('days', JSON.stringify(arr)); } }

  function updateRank(){
    const days = getDays().length;
    let name='Starter', pct = days/30*100;
    if(days>=90){name='Supreme';pct=100;}
    else if(days>=60){name='Elite';pct=(days-60)/30*100;}
    else if(days>=30){name='Pioneer';pct=(days-30)/30*100;}
    rankEl.textContent = `Rank: ${name}`;
    rankBar.style.width = `${Math.min(100,pct)}%`;
  }

  function showRankDetails(){
    const days = getDays().length;
    let next='Pioneer', rem=30-days;
    if(days>=90){ next='Top'; rem=0; }
    else if(days>=60){ next='Supreme'; rem=90-days; }
    else if(days>=30){ next='Elite'; rem=60-days; }
    else { next='Pioneer'; rem=30-days; }
    alert(`${days} days mined\nNext rank: ${next} in ${rem} days`);
  }

  function giveStreakBonus(){
    const arr = getDays().slice().sort(), today=new Date(), last7=[];
    for(let i=0;i<7;i++){ let d=new Date(today); d.setDate(today.getDate()-i); last7.push(d.toISOString().split('T')[0]); }
    let streak=0, bonus=0;
    last7.forEach(d=>{ if(arr.includes(d)){ streak++; if(streak===2) bonus+=0.05; if(streak===5) bonus+=0.5; } else streak=0; });
    if(bonus>0){ alert("ðŸŽ‰ Congratulations, your hard work is paying off."); setBalance(getBalance()+bonus); }
  }

  function format(ms){
    const s=Math.floor(ms/1000), h=Math.floor(s/3600), m=Math.floor((s%3600)/60), sec=s%60;
    return [h,m,sec].map(x=>String(x).padStart(2,'0')).join(':');
  }

  function tick(){
    const now=Date.now(), elapsed= now - startTime;
    if(elapsed>=DURATION){
      clearInterval(interval);
      countdownEl.textContent='00:00:00'; minedEl.textContent='+1.72800';
      setBalance(baseBalance+1.728);
      addDay();
      giveStreakBonus();
      updateRank();
      localStorage.removeItem('startTime');
      return;
    }
    countdownEl.textContent = format(DURATION - elapsed);
    const earned = Math.floor(elapsed/1000)*RATE;
    minedEl.textContent = `+${earned.toFixed(5)}`;
    setBalance(baseBalance + earned);
  }

  window.startMining = function(){
    if(localStorage.getItem('startTime')) return;
    sound.play();
    startTime=Date.now(); baseBalance=getBalance();
    localStorage.setItem('startTime', startTime);
    interval = setInterval(tick,1000);
  };

  window.toggleCalendar= function(){
    const arr=getDays(), today=todayStr();
    minedDatesEl.innerHTML = arr.map(d => `${d} ${d===today?'âœ…':''}`).join('<br>');
    calendarEl.style.display = calendarEl.style.display==='block'?'none':'block';
  };

  window.onload = function(){
    setBalance(getBalance()); updateRank();
    const stored = parseInt(localStorage.getItem('startTime'));
    if(stored){
      startTime=stored; baseBalance=getBalance() - Math.floor((Date.now()-stored)/1000)*RATE;
      sound.play();
      interval = setInterval(tick,1000);
    }
  };
})();
</script>
</body>
</html>
