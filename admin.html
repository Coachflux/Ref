<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NHCoin Admin Panel</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
body{background:#021a17;color:white;font-family:'Segoe UI',sans-serif;padding:20px;text-align:center;}
table{width:100%;border-collapse:collapse;margin-top:20px;}
th,td{padding:10px;border-bottom:1px solid #00ffcc;}
th{background:#00775e;}
tr:hover{background:#033d35;}
button{background:linear-gradient(135deg,#00ffcc,#00775e);border:none;padding:10px 20px;color:white;border-radius:8px;cursor:pointer;font-weight:bold;}
button:hover{transform:scale(1.05);}
</style>
</head>
<body>
<h2>Admin Dashboard</h2>
<p>Sorted by highest referrals</p>
<button id="copyEmails">Copy All Emails</button>
<table id="userTable">
  <thead>
    <tr>
      <th>Position</th>
      <th>Username</th>
      <th>Email</th>
      <th>Referrals</th>
      <th>Referral Earning</th>
      <th>Password</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-database.js";

const firebaseConfig = {
      apiKey: "AIzaSyDR_rkTfGLWWX4NRWOVer9wwGlUFiRMRO4",
      authDomain: "usdt-login.firebaseapp.com",
      databaseURL: "https://usdt-login-default-rtdb.firebaseio.com",
      projectId: "usdt-login",
      storageBucket: "usdt-login.firebasestorage.app",
      messagingSenderId: "807602854227",
      appId: "1:807602854227:web:309ae73f572e48dbc7a9a6"
    };

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

const tableBody = document.querySelector("#userTable tbody");

get(child(ref(db), "users")).then(snapshot=>{
  if(snapshot.exists()){
    const users = Object.values(snapshot.val());
    users.sort((a,b)=>b.referrals - a.referrals);
    let pos = 6574;
    users.forEach(u=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${pos++}</td>
        <td>${u.username}</td>
        <td>${u.email}</td>
        <td>${u.referrals || 0}</td>
        <td>$${u.referralEarning || 0}</td>
        <td>••••••</td>
      `;
      tableBody.appendChild(tr);
    });
  }
});

document.getElementById('copyEmails').addEventListener('click', ()=>{
  let emails = Array.from(document.querySelectorAll('#userTable tbody tr td:nth-child(3)')).map(td=>td.textContent).join(', ');
  navigator.clipboard.writeText(emails);
  alert("All emails copied to clipboard!");
});
</script>
</body>
</html>
